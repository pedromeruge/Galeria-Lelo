@inject NavigationManager NavigationManager
@using app.Components.Pages.Menu
@rendermode InteractiveServer
@inject Blazored.LocalStorage.ILocalStorageService localStorage
@inject Microsoft.AspNetCore.Components.NavigationManager NavigationManager
@inject IUserService UserService
@using Classes.Session


 @* <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
 <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script> *@

 <div class="header">
   <img class="logo-galeria" src="pngs/logo-galeria-horiz.png" />
   <form id="searchForm" class="searchbar" @onsubmit="Search">
       <img class="lupa" src="pngs/searchbar-lupa.png" />
       <input type="search" id="searchInput" placeholder="Pesquisar artigos" @bind="searchQuery">
   </form>
   <button class="logout-button" @onclick="Logout" CausesValidation="False">Logout</button>
 </div>

 @code{
	private string? searchQuery = string.Empty; // resultado da pesquisa
 //interpretar pesquisa
	private void Search() {
		if (searchQuery != null && searchQuery != "") {
			NavigationManager.NavigateTo($"/SearchResults/{Uri.EscapeDataString(searchQuery)}");
		}
	}

 	private async Task Logout()
     {
		Session session = await localStorage.GetItemAsync<Session>("Session");
        await localStorage.RemoveItemAsync("User");
		await localStorage.RemoveItemAsync("Session");
		await UserService.terminateSession(session);
 		NavigationManager.NavigateTo("/");
     }
 }